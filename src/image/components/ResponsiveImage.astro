---
interface Props extends astroHTML.JSX.ImgHTMLAttributes {
  desktop: string | null
  desktopBlur?: string | null
  mobile?: string | null
  mobileBlur?: string | null

  // GraphQL image props
  desktop_blur?: string | null
  mobile_blur?: string | null
}

const {
  desktop,
  desktopBlur: _desktopBlur,
  mobile,
  mobileBlur: _mobileBlur,

  desktop_blur: _desktop_blur,
  mobile_blur: _mobile_blur,
  src: _src,

  ...attributes
} = Astro.props

// const desktopBlur = Astro.props.desktopBlur || Astro.props.desktop_blur
// const mobileBlur = Astro.props.mobileBlur || Astro.props.mobile_blur

const breakpoint = 768
---

{desktop && (
  mobile ? (
    <picture>
      {mobile && <source media={`(max-width: ${breakpoint - 0.02}px)`} srcset={mobile} />}
      <img src={desktop} {...attributes} />
    </picture>
  ) : (
    <img src={desktop} {...attributes} />
  )
)}
